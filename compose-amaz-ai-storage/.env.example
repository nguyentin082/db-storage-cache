# ============================================
# PORTS CONFIGURATION
# ============================================
POSTGRES_PORT=25432
MINIO_PORT=29000
MINIO_CONSOLE_PORT=29001
AUTH_PORT=29999
REST_PORT=23001
STORAGE_PORT=25000
META_PORT=28080
KONG_PROXY_PORT=28000
KONG_ADMIN_PORT=28001
STUDIO_PORT=23000

# ============================================
# POSTGRES DATABASE
# ============================================
POSTGRES_HOST=postgres
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_postgres_password_here
PGPASSWORD=your_postgres_password_here

# Database URLs - Will be auto-generated based on above values
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}
AUTH_DATABASE_URL=postgres://supabase_auth_admin:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}
STORAGE_DATABASE_URL=postgres://supabase_storage_admin:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}
REST_DATABASE_URL=postgres://authenticator:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}

# ============================================
# JWT CONFIGURATION (QUAN TRá»ŒNG - KEEP SECRET!)
# ============================================
# JWT secret - CHANGE THIS TO A SECURE RANDOM STRING!
JWT_SECRET=your-super-secret-jwt-token-change-this-in-production
JWT_EXP=3600

# JWT Keys - Run ./generate-jwt.sh to generate these
# These MUST be signed with the JWT_SECRET above
ANON_KEY=your_anon_key_here
SERVICE_KEY=your_service_key_here

# ============================================
# STORAGE CONFIGURATION
# ============================================
# Storage backend: 'file' for local filesystem, 's3' for MinIO/S3
STORAGE_BACKEND=file

# MinIO (optional - only needed if using S3 backend)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123

# ============================================
# AUTH (GoTrue) CONFIGURATION
# ============================================
GOTRUE_API_HOST=0.0.0.0
GOTRUE_API_PORT=9999
GOTRUE_SITE_URL=http://${HOST_IP}:${STUDIO_PORT}
GOTRUE_URI_ALLOW_LIST=
GOTRUE_DISABLE_SIGNUP=false
GOTRUE_JWT_ADMIN_ROLES=service_role
GOTRUE_JWT_AUD=authenticated
GOTRUE_EXTERNAL_EMAIL_ENABLED=true
GOTRUE_EXTERNAL_ANONYMOUS_USERS_ENABLED=false
GOTRUE_MAILER_AUTOCONFIRM=true
GOTRUE_EXTERNAL_PHONE_ENABLED=false
GOTRUE_SMS_AUTOCONFIRM=true

# ============================================
# POSTGREST CONFIGURATION
# ============================================
PGRST_DB_SCHEMAS=public,storage,graphql_public
PGRST_DB_ANON_ROLE=anon
PGRST_DB_USE_LEGACY_GUCS=false

# ============================================
# STORAGE API CONFIGURATION
# ============================================
FILE_SIZE_LIMIT=52428800
TENANT_ID=stub
REGION=us-east-1
REQUEST_ALLOW_X_FORWARDED_PATH=true

# ============================================
# PUBLIC URLs
# ============================================
# IMPORTANT: Change this to your server IP or domain name
# For local access: localhost
# For network access: your server IP (e.g., 192.168.100.71)
# For production: your domain (e.g., api.yourdomain.com)
HOST_IP=localhost
API_EXTERNAL_URL=http://${HOST_IP}:${KONG_PROXY_PORT}
SUPABASE_PUBLIC_URL=http://${HOST_IP}:${KONG_PROXY_PORT}
SUPABASE_URL=http://kong:8000

# ============================================
# INTERNAL SERVICE URLs
# ============================================
POSTGREST_URL=http://rest:3000
STUDIO_PG_META_URL=http://meta:8080
