_format_version: '3.0'

# Global CORS Plugin
plugins:
    - name: cors
      config:
          origins:
              - '*'
          methods:
              - GET
              - POST
              - PUT
              - PATCH
              - DELETE
              - OPTIONS
              - HEAD
          headers:
              - Accept
              - Accept-Version
              - Content-Length
              - Content-MD5
              - Content-Type
              - Date
              - X-Auth-Token
              - Authorization
              - apikey
              - X-Client-Info
          exposed_headers:
              - X-Auth-Token
          credentials: true
          max_age: 3600
          preflight_continue: false

services:
    - name: auth
      url: http://auth:9999
      routes:
          - name: auth
            paths:
                - /auth/v1

    - name: rest
      url: http://rest:3000
      routes:
          - name: rest
            paths:
                - /rest/v1

    - name: storage
      url: http://storage:5000
      routes:
          - name: storage
            paths:
                - /storage/v1
